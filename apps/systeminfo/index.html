<div class="systeminfo-app">
    <div class="systeminfo-header">
        <h2>ğŸ–¥ï¸ ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h2>
    </div>

    <div class="systeminfo-content">
        <div class="info-section">
            <h3>ğŸ’» ã‚·ã‚¹ãƒ†ãƒ </h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">OSå:</span>
                    <span class="info-value">ç–‘ä¼¼OS v1.0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</span>
                    <span class="info-value">Build 2024.01.15</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:</span>
                    <span class="info-value" id="architecture">x64</span>
                </div>
                <div class="info-item">
                    <span class="info-label">èµ·å‹•æ™‚é–“:</span>
                    <span class="info-value" id="uptime">è¨ˆç®—ä¸­...</span>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h3>ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">ãƒ–ãƒ©ã‚¦ã‚¶:</span>
                    <span class="info-value" id="browser-name">å–å¾—ä¸­...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</span>
                    <span class="info-value" id="browser-version">å–å¾—ä¸­...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">è¨€èª:</span>
                    <span class="info-value" id="browser-lang">å–å¾—ä¸­...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ç”»é¢è§£åƒåº¦:</span>
                    <span class="info-value" id="screen-resolution">å–å¾—ä¸­...</span>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h3">ğŸ’¾ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</h3>
                <div class="memory-info">
                    <div class="memory-bar">
                        <div class="memory-used" style="width: 65%"></div>
                    </div>
                    <div class="memory-text">
                        <span>ä½¿ç”¨ä¸­: 6.5GB / 10GB (65%)</span>
                    </div>
                </div>
        </div>

        <div class="info-section">
            <h3">ğŸ“Š å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹</h3>
                <div class="process-list" id="process-list">
                    <!-- å‹•çš„ã«ç”Ÿæˆ -->
                </div>
        </div>

        <div class="info-section">
            <h3">ğŸ”§ ãƒ‡ãƒãƒƒã‚°æƒ…å ±</h3>
                <div class="debug-info">
                    <button class="debug-btn" onclick="collectDebugInfo()">è¨ºæ–­æƒ…å ±ã‚’åé›†</button>
                    <button class="debug-btn" onclick="exportSystemInfo()">æƒ…å ±ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                    <button class="debug-btn" onclick="clearCache()">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢</button>
                </div>
        </div>
    </div>
</div>

<style>
    .systeminfo-app {
        height: 100%;
        padding: 20px;
        background: #f8f9fa;
        overflow-y: auto;
    }

    .systeminfo-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .systeminfo-header h2 {
        color: #495057;
        font-size: 24px;
        margin: 0;
    }

    .info-section {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .info-section h3 {
        color: #343a40;
        font-size: 18px;
        margin: 0 0 15px 0;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 8px;
    }

    .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
    }

    .info-label {
        font-weight: 600;
        color: #6c757d;
    }

    .info-value {
        color: #343a40;
        font-family: monospace;
    }

    .memory-info {
        margin-top: 10px;
    }

    .memory-bar {
        width: 100%;
        height: 20px;
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 8px;
    }

    .memory-used {
        height: 100%;
        background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
        transition: width 0.3s ease;
    }

    .memory-text {
        text-align: center;
        font-size: 14px;
        color: #6c757d;
    }

    .process-list {
        max-height: 150px;
        overflow-y: auto;
        border: 1px solid #e9ecef;
        border-radius: 4px;
    }

    .process-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 12px;
        border-bottom: 1px solid #f8f9fa;
        font-size: 14px;
    }

    .process-item:last-child {
        border-bottom: none;
    }

    .process-name {
        font-weight: 500;
    }

    .process-memory {
        color: #6c757d;
        font-family: monospace;
    }

    .debug-info {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .debug-btn {
        padding: 8px 16px;
        border: 1px solid #007bff;
        background: white;
        color: #007bff;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
    }

    .debug-btn:hover {
        background: #007bff;
        color: white;
    }
</style>

<script>
    let startTime = Date.now();

    function updateSystemInfo() {
        // ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±
        const userAgent = navigator.userAgent;
        let browserName = 'Unknown';
        let browserVersion = 'Unknown';

        if (userAgent.includes('Chrome')) {
            browserName = 'Google Chrome';
            browserVersion = userAgent.match(/Chrome\/([0-9.]+)/)?.[1] || 'Unknown';
        } else if (userAgent.includes('Firefox')) {
            browserName = 'Mozilla Firefox';
            browserVersion = userAgent.match(/Firefox\/([0-9.]+)/)?.[1] || 'Unknown';
        } else if (userAgent.includes('Safari')) {
            browserName = 'Safari';
            browserVersion = userAgent.match(/Safari\/([0-9.]+)/)?.[1] || 'Unknown';
        }

        document.getElementById('browser-name').textContent = browserName;
        document.getElementById('browser-version').textContent = browserVersion;
        document.getElementById('browser-lang').textContent = navigator.language;
        document.getElementById('screen-resolution').textContent = `${screen.width} x ${screen.height}`;

        // ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
        const platform = navigator.platform;
        document.getElementById('architecture').textContent = platform.includes('64') ? 'x64' : 'x86';
    }

    function updateUptime() {
        const uptime = Date.now() - startTime;
        const seconds = Math.floor(uptime / 1000) % 60;
        const minutes = Math.floor(uptime / (1000 * 60)) % 60;
        const hours = Math.floor(uptime / (1000 * 60 * 60));

        document.getElementById('uptime').textContent = `${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’`;
    }

    function updateProcessList() {
        const processList = document.getElementById('process-list');
        const processes = [
            { name: 'ç–‘ä¼¼OS ã‚«ãƒ¼ãƒãƒ«', memory: '128 MB' },
            { name: 'ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼', memory: '64 MB' },
            { name: 'ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—', memory: '32 MB' },
            { name: 'ã‚¿ã‚¹ã‚¯ãƒãƒ¼', memory: '16 MB' }
        ];

        // å®Ÿè¡Œä¸­ã®ã‚¢ãƒ—ãƒªã‚’è¿½åŠ 
        if (window.os && window.os.appManager) {
            const runningApps = window.os.appManager.getRunningApps();
            runningApps.forEach(app => {
                processes.push({
                    name: app.config.title,
                    memory: Math.floor(Math.random() * 50 + 10) + ' MB'
                });
            });
        }

        processList.innerHTML = processes.map(process => `
    <div class="process-item">
      <span class="process-name">${process.name}</span>
      <span class="process-memory">${process.memory}</span>
    </div>
  `).join('');
    }

    function collectDebugInfo() {
        const debugInfo = {
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent,
            url: window.location.href,
            viewport: `${window.innerWidth}x${window.innerHeight}`,
            runningApps: window.os ? window.os.appManager.getRunningApps().length : 0
        };

        console.log('Debug Info:', debugInfo);
        alert('è¨ºæ–­æƒ…å ±ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã—ã¾ã—ãŸ');
    }

    function exportSystemInfo() {
        const systemInfo = {
            os: 'ç–‘ä¼¼OS v1.0',
            browser: document.getElementById('browser-name').textContent,
            version: document.getElementById('browser-version').textContent,
            resolution: document.getElementById('screen-resolution').textContent,
            uptime: document.getElementById('uptime').textContent,
            timestamp: new Date().toISOString()
        };

        const dataStr = JSON.stringify(systemInfo, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);

        const link = document.createElement('a');
        link.href = url;
        link.download = 'system-info.json';
        link.click();

        URL.revokeObjectURL(url);
    }

    function clearCache() {
        if (confirm('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ\nï¼ˆä¿å­˜ã•ã‚ŒãŸãƒ¡ãƒ¢ãªã©ã¯å‰Šé™¤ã•ã‚Œã¾ã›ã‚“ï¼‰')) {
            // localStorage ã®ä¸€éƒ¨ã‚’ã‚¯ãƒªã‚¢ï¼ˆé‡è¦ãªãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒï¼‰
            const importantKeys = ['notepad-content', 'notepad-saved-time'];
            const allKeys = Object.keys(localStorage);

            allKeys.forEach(key => {
                if (!importantKeys.includes(key)) {
                    localStorage.removeItem(key);
                }
            });

            alert('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
        }
    }

    // åˆæœŸåŒ–ã¨å®šæœŸæ›´æ–°
    setTimeout(() => {
        updateSystemInfo();
        updateUptime();
        updateProcessList();

        // 1ç§’ã”ã¨ã«æ›´æ–°
        setInterval(() => {
            updateUptime();
            updateProcessList();
        }, 1000);
    }, 100);
</script>